{"ast":null,"code":"import React,{useState,useEffect}from'react';import Navbar from'../components/Navbar';import Sidebar from'../components/Sidebar';import Toolbar from'../components/Toolbar';import CanvasEditor from'../components/CanvasEditor';import API from'../api/api';import{useLocation,useNavigate}from'react-router-dom';import{motion}from'framer-motion';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Editor=()=>{const[design,setDesign]=useState(null);const location=useLocation();const navigate=useNavigate();const queryParams=new URLSearchParams(location.search);const designId=queryParams.get('id');const fetchDesign=async()=>{try{if(!designId){setDesign({title:'New Design',jsonData:{shapes:[],text:[],images:[]},thumbnailUrl:''});return;}const res=await API.get(\"/designs/\".concat(designId));setDesign(res.data);}catch(err){console.error(err);navigate('/dashboard');}};useEffect(()=>{const token=localStorage.getItem('token');if(!token)navigate('/login');else fetchDesign();},[designId]);const handleAction=action=>{console.log('Action:',action);// You can implement undo, redo, export PNG functionality here\n};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(motion.div,{className:\"flex bg-gray-50 min-h-screen\",initial:{opacity:0},animate:{opacity:1},transition:{duration:0.8},children:[/*#__PURE__*/_jsx(Sidebar,{tools:['Rectangle','Text','Image'],onSelectTool:tool=>console.log('Selected Tool:',tool)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 p-4\",children:[/*#__PURE__*/_jsx(Toolbar,{onAction:handleAction}),design&&/*#__PURE__*/_jsx(CanvasEditor,{design:design})]})]})]});};export default Editor;","map":{"version":3,"names":["React","useState","useEffect","Navbar","Sidebar","Toolbar","CanvasEditor","API","useLocation","useNavigate","motion","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Editor","design","setDesign","location","navigate","queryParams","URLSearchParams","search","designId","get","fetchDesign","title","jsonData","shapes","text","images","thumbnailUrl","res","concat","data","err","console","error","token","localStorage","getItem","handleAction","action","log","children","div","className","initial","opacity","animate","transition","duration","tools","onSelectTool","tool","onAction"],"sources":["C:/Users/lenovo pro/Documents/gncipl-6-week/Week-6_final_project/matty-project/client/src/pages/Editor.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Navbar from '../components/Navbar';\r\nimport Sidebar from '../components/Sidebar';\r\nimport Toolbar from '../components/Toolbar';\r\nimport CanvasEditor from '../components/CanvasEditor';\r\nimport API from '../api/api';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\n\r\nconst Editor = () => {\r\n  const [design, setDesign] = useState(null);\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const queryParams = new URLSearchParams(location.search);\r\n  const designId = queryParams.get('id');\r\n\r\n  const fetchDesign = async () => {\r\n    try {\r\n      if (!designId) {\r\n        setDesign({ title: 'New Design', jsonData: { shapes: [], text: [], images: [] }, thumbnailUrl: '' });\r\n        return;\r\n      }\r\n      const res = await API.get(`/designs/${designId}`);\r\n      setDesign(res.data);\r\n    } catch (err) {\r\n      console.error(err);\r\n      navigate('/dashboard');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) navigate('/login');\r\n    else fetchDesign();\r\n  }, [designId]);\r\n\r\n  const handleAction = (action) => {\r\n    console.log('Action:', action);\r\n    // You can implement undo, redo, export PNG functionality here\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <motion.div className=\"flex bg-gray-50 min-h-screen\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ duration: 0.8 }}>\r\n        <Sidebar tools={['Rectangle', 'Text', 'Image']} onSelectTool={(tool) => console.log('Selected Tool:', tool)} />\r\n        <div className=\"flex-1 p-4\">\r\n          <Toolbar onAction={handleAction} />\r\n          {design && <CanvasEditor design={design} />}\r\n        </div>\r\n      </motion.div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Editor;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}