{"ast":null,"code":"// src/api/api.js\n// API Base URL - Change this to your backend URL\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// JWT Token Management (In-Memory Storage)\nlet authToken = null;\nlet currentUser = null;\n\n// Token Manager\nexport const tokenManager = {\n  setToken: token => {\n    authToken = token;\n  },\n  getToken: () => {\n    return authToken;\n  },\n  removeToken: () => {\n    authToken = null;\n  },\n  setUser: user => {\n    currentUser = user;\n  },\n  getUser: () => {\n    return currentUser;\n  },\n  removeUser: () => {\n    currentUser = null;\n  },\n  clearAuth: () => {\n    authToken = null;\n    currentUser = null;\n  }\n};\n\n// Base API Request Function\nconst apiRequest = async (endpoint, options = {}) => {\n  const token = tokenManager.getToken();\n  const config = {\n    ...options,\n    headers: {\n      'Content-Type': 'application/json',\n      ...(token && {\n        Authorization: `Bearer ${token}`\n      }),\n      ...options.headers\n    }\n  };\n  try {\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, config);\n\n    // Handle 401 Unauthorized (Token expired)\n    if (response.status === 401) {\n      tokenManager.clearAuth();\n      window.location.href = '/login';\n      throw new Error('Session expired. Please login again.');\n    }\n\n    // Parse response\n    const data = await response.json();\n\n    // Handle non-OK responses\n    if (!response.ok) {\n      throw new Error(data.message || 'Request failed');\n    }\n    return data;\n  } catch (error) {\n    console.error('API Request Error:', error);\n    throw error;\n  }\n};\n\n// Authentication API\nexport const authAPI = {\n  // Register new user\n  register: async userData => {\n    const response = await apiRequest('/auth/register', {\n      method: 'POST',\n      body: JSON.stringify(userData)\n    });\n\n    // Store token and user if returned\n    if (response.token) {\n      tokenManager.setToken(response.token);\n      tokenManager.setUser(response.user);\n    }\n    return response;\n  },\n  // Login user\n  login: async credentials => {\n    const response = await apiRequest('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify(credentials)\n    });\n\n    // Store token and user\n    if (response.token) {\n      tokenManager.setToken(response.token);\n      tokenManager.setUser(response.user);\n    }\n    return response;\n  },\n  // Logout user\n  logout: () => {\n    tokenManager.clearAuth();\n  },\n  // Verify JWT token\n  verifyToken: async () => {\n    return await apiRequest('/auth/verify', {\n      method: 'GET'\n    });\n  },\n  // Google OAuth\n  googleAuth: async googleToken => {\n    const response = await apiRequest('/auth/google', {\n      method: 'POST',\n      body: JSON.stringify({\n        token: googleToken\n      })\n    });\n    if (response.token) {\n      tokenManager.setToken(response.token);\n      tokenManager.setUser(response.user);\n    }\n    return response;\n  },\n  // Forgot Password\n  forgotPassword: async email => {\n    return await apiRequest('/auth/forgot-password', {\n      method: 'POST',\n      body: JSON.stringify({\n        email\n      })\n    });\n  },\n  // Reset Password\n  resetPassword: async (token, newPassword) => {\n    return await apiRequest('/auth/reset-password', {\n      method: 'POST',\n      body: JSON.stringify({\n        token,\n        password: newPassword\n      })\n    });\n  }\n};\n\n// Design API (Protected Routes)\n\n// Export default API object\nexport default {\n  auth: authAPI\n};","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","authToken","currentUser","tokenManager","setToken","token","getToken","removeToken","setUser","user","getUser","removeUser","clearAuth","apiRequest","endpoint","options","config","headers","Authorization","response","fetch","status","window","location","href","Error","data","json","ok","message","error","console","authAPI","register","userData","method","body","JSON","stringify","login","credentials","logout","verifyToken","googleAuth","googleToken","forgotPassword","email","resetPassword","newPassword","password","auth"],"sources":["C:/Users/lenovo pro/Documents/gncipl-6-week/Week-6_final_project/matty-project/client/src/api/api.js"],"sourcesContent":["// src/api/api.js\r\n// API Base URL - Change this to your backend URL\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n// JWT Token Management (In-Memory Storage)\r\nlet authToken = null;\r\nlet currentUser = null;\r\n\r\n// Token Manager\r\nexport const tokenManager = {\r\n  setToken: (token) => {\r\n    authToken = token;\r\n  },\r\n  \r\n  getToken: () => {\r\n    return authToken;\r\n  },\r\n  \r\n  removeToken: () => {\r\n    authToken = null;\r\n  },\r\n  \r\n  setUser: (user) => {\r\n    currentUser = user;\r\n  },\r\n  \r\n  getUser: () => {\r\n    return currentUser;\r\n  },\r\n  \r\n  removeUser: () => {\r\n    currentUser = null;\r\n  },\r\n  \r\n  clearAuth: () => {\r\n    authToken = null;\r\n    currentUser = null;\r\n  }\r\n};\r\n\r\n// Base API Request Function\r\nconst apiRequest = async (endpoint, options = {}) => {\r\n  const token = tokenManager.getToken();\r\n  \r\n  const config = {\r\n    ...options,\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...(token && { Authorization: `Bearer ${token}` }),\r\n      ...options.headers,\r\n    },\r\n  };\r\n\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, config);\r\n    \r\n    // Handle 401 Unauthorized (Token expired)\r\n    if (response.status === 401) {\r\n      tokenManager.clearAuth();\r\n      window.location.href = '/login';\r\n      throw new Error('Session expired. Please login again.');\r\n    }\r\n    \r\n    // Parse response\r\n    const data = await response.json();\r\n    \r\n    // Handle non-OK responses\r\n    if (!response.ok) {\r\n      throw new Error(data.message || 'Request failed');\r\n    }\r\n    \r\n    return data;\r\n  } catch (error) {\r\n    console.error('API Request Error:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Authentication API\r\nexport const authAPI = {\r\n  // Register new user\r\n  register: async (userData) => {\r\n    const response = await apiRequest('/auth/register', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    });\r\n    \r\n    // Store token and user if returned\r\n    if (response.token) {\r\n      tokenManager.setToken(response.token);\r\n      tokenManager.setUser(response.user);\r\n    }\r\n    \r\n    return response;\r\n  },\r\n\r\n  // Login user\r\n  login: async (credentials) => {\r\n    const response = await apiRequest('/auth/login', {\r\n      method: 'POST',\r\n      body: JSON.stringify(credentials),\r\n    });\r\n    \r\n    // Store token and user\r\n    if (response.token) {\r\n      tokenManager.setToken(response.token);\r\n      tokenManager.setUser(response.user);\r\n    }\r\n    \r\n    return response;\r\n  },\r\n\r\n  // Logout user\r\n  logout: () => {\r\n    tokenManager.clearAuth();\r\n  },\r\n\r\n  // Verify JWT token\r\n  verifyToken: async () => {\r\n    return await apiRequest('/auth/verify', {\r\n      method: 'GET',\r\n    });\r\n  },\r\n\r\n  // Google OAuth\r\n  googleAuth: async (googleToken) => {\r\n    const response = await apiRequest('/auth/google', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ token: googleToken }),\r\n    });\r\n    \r\n    if (response.token) {\r\n      tokenManager.setToken(response.token);\r\n      tokenManager.setUser(response.user);\r\n    }\r\n    \r\n    return response;\r\n  },\r\n\r\n  // Forgot Password\r\n  forgotPassword: async (email) => {\r\n    return await apiRequest('/auth/forgot-password', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ email }),\r\n    });\r\n  },\r\n\r\n  // Reset Password\r\n  resetPassword: async (token, newPassword) => {\r\n    return await apiRequest('/auth/reset-password', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ token, password: newPassword }),\r\n    });\r\n  },\r\n};\r\n\r\n// Design API (Protected Routes)\r\n\r\n\r\n// Export default API object\r\nexport default {\r\n  auth: authAPI,\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}