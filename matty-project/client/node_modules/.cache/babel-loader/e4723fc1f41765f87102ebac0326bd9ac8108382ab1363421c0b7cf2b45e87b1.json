{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\91822\\\\Piyush\\\\Desktop\\\\Week -6\\\\Week-6_final_project\\\\matty-project\\\\client\\\\src\\\\components\\\\CanvasEditor.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\n// Helper: convert dataURL to Blob (for Cloud upload)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction dataURLtoBlob(dataurl) {\n  var arr = dataurl.split(\",\"),\n    mime = arr[0].match(/:(.*?);/)[1],\n    bstr = atob(arr[1]),\n    n = bstr.length,\n    u8arr = new Uint8Array(n);\n  while (n--) u8arr[n] = bstr.charCodeAt(n);\n  return new Blob([u8arr], {\n    type: mime\n  });\n}\nfunction drawPolygon(ctx, x, y, radius, sides, color) {\n  ctx.beginPath();\n  for (let i = 0; i < sides; i++) {\n    const angle = 2 * Math.PI * i / sides - Math.PI / 2;\n    const dx = x + radius * Math.cos(angle);\n    const dy = y + radius * Math.sin(angle);\n    if (i === 0) ctx.moveTo(dx, dy);else ctx.lineTo(dx, dy);\n  }\n  ctx.closePath();\n  ctx.fillStyle = color;\n  ctx.fill();\n}\nconst HANDLE_SIZE = 16;\nlet nextId = 1;\nconst getDefaultSize = (type, text, ctx) => {\n  if (type === \"rectangle\") return {\n    w: 120,\n    h: 80\n  };\n  if (type === \"square\" || type === \"circle\") return {\n    w: 100,\n    h: 100\n  };\n  if (type === \"oval\") return {\n    w: 120,\n    h: 80\n  };\n  if (type === \"image\") return {\n    w: 200,\n    h: 200\n  };\n  if (type === \"text\") {\n    ctx.font = \"24px Arial\";\n    return {\n      w: ctx.measureText(text).width,\n      h: 32,\n      fontSize: 24\n    };\n  }\n  return {\n    w: 120,\n    h: 80\n  };\n};\nexport default function CanvasEditor({\n  initialData\n}) {\n  _s();\n  var _elements$selectedIdx3;\n  const canvasRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const {\n    id: designId\n  } = useParams();\n  const navigate = useNavigate();\n\n  // UI state\n  const [saveMessage, setSaveMessage] = useState(\"\");\n  const [designName, setDesignName] = useState(\"\");\n  const [selectedShape, setSelectedShape] = useState(\"rectangle\");\n  const [shapeColor, setShapeColor] = useState(\"#4f46e5\");\n  const [drawMode, setDrawMode] = useState(false);\n  const [eraserMode, setEraserMode] = useState(false);\n  const [eraserSize, setEraserSize] = useState(20);\n  const [textColor, setTextColor] = useState(\"#111827\");\n  const [pencilColor, setPencilColor] = useState(\"#333\");\n  const [brushSize, setBrushSize] = useState(2);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [selectedIdx, setSelectedIdx] = useState(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [resizingHandle, setResizingHandle] = useState(null);\n  const drawingPointsRef = useRef([]);\n  const [fontFamily, setFontFamily] = useState(\"Arial\");\n\n  // history state\n  const [history, setHistory] = useState([{\n    elements: [],\n    lines: [],\n    title: \"\"\n  }]);\n  const [historyIndex, setHistoryIndex] = useState(0);\n  const [imageCache, setImageCache] = useState({});\n\n  // derive current elements & lines\n  const {\n    elements,\n    lines\n  } = history[historyIndex] || {\n    elements: [],\n    lines: []\n  };\n  useEffect(() => {\n    var _initialData$jsonData, _initialData$jsonData2;\n    setHistory([{\n      elements: (initialData === null || initialData === void 0 ? void 0 : (_initialData$jsonData = initialData.jsonData) === null || _initialData$jsonData === void 0 ? void 0 : _initialData$jsonData.elements) || [],\n      lines: (initialData === null || initialData === void 0 ? void 0 : (_initialData$jsonData2 = initialData.jsonData) === null || _initialData$jsonData2 === void 0 ? void 0 : _initialData$jsonData2.lines) || [],\n      title: (initialData === null || initialData === void 0 ? void 0 : initialData.title) || \"\"\n    }]);\n    setHistoryIndex(0);\n    setDesignName((initialData === null || initialData === void 0 ? void 0 : initialData.title) || \"Untitled\");\n  }, [initialData]);\n\n  // preload images into cache\n  useEffect(() => {\n    elements.forEach(el => {\n      if (el.type === \"image\" && el.src && !imageCache[el.id]) {\n        const img = new window.Image();\n        img.src = el.src;\n        img.onload = () => setImageCache(c => ({\n          ...c,\n          [el.id]: img\n        }));\n      }\n    });\n  }, [elements, imageCache]);\n\n  // drawing/render loop\n  useEffect(() => {\n    if (!canvasRef.current) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.lineCap = \"round\";\n    ctx.lineWidth = 2;\n    elements.forEach((el, idx) => {\n      ctx.save();\n      const w = el.w,\n        h = el.h;\n      const cx = el.x + w / 2;\n      const cy = el.y + h / 2;\n      ctx.translate(cx, cy);\n      ctx.rotate((el.rotation || 0) * Math.PI / 180);\n      ctx.translate(-cx, -cy);\n      if (el.type === \"image\") {\n        const img = imageCache[el.id];\n        if (img) {\n          ctx.drawImage(img, el.x, el.y, w, h);\n          if (idx === selectedIdx) {\n            ctx.strokeStyle = \"#f59e42\";\n            ctx.lineWidth = 2;\n            ctx.strokeRect(el.x - 2, el.y - 2, w + 4, h + 4);\n            drawHandles(ctx, el.x, el.y, w, h);\n          }\n        }\n      } else if (el.type === \"text\") {\n        ctx.font = `${el.fontSize || 24}px ${el.fontFamily || \"Arial\"}`;\n        ctx.fillStyle = el.color;\n        ctx.fillText(el.text, el.x, el.y + (el.fontSize || 24));\n        const boxW = el.w;\n        const boxH = el.h || (el.fontSize || 24) + 8;\n        if (idx === selectedIdx) {\n          ctx.strokeStyle = \"#f59e42\";\n          ctx.strokeRect(el.x - 2, el.y - 2, boxW + 4, boxH + 4);\n          drawHandles(ctx, el.x, el.y, boxW, boxH);\n        }\n      } else {\n        ctx.fillStyle = el.color;\n        ctx.strokeStyle = el.color;\n        switch (el.type) {\n          case \"rectangle\":\n          case \"square\":\n            ctx.fillRect(el.x, el.y, w, h);\n            break;\n          case \"circle\":\n            ctx.beginPath();\n            ctx.arc(el.x + w / 2, el.y + h / 2, w / 2, 0, 2 * Math.PI);\n            ctx.fill();\n            break;\n          case \"oval\":\n            ctx.save();\n            ctx.translate(el.x + w / 2, el.y + h / 2);\n            ctx.scale(1.5, 1);\n            ctx.beginPath();\n            ctx.arc(0, 0, h / 2, 0, 2 * Math.PI);\n            ctx.restore();\n            ctx.fill();\n            break;\n          case \"triangle\":\n            ctx.beginPath();\n            ctx.moveTo(el.x, el.y + h);\n            ctx.lineTo(el.x + w, el.y + h);\n            ctx.lineTo(el.x + w / 2, el.y);\n            ctx.closePath();\n            ctx.fill();\n            break;\n          case \"parallelogram\":\n            ctx.beginPath();\n            ctx.moveTo(el.x + 20, el.y + h);\n            ctx.lineTo(el.x + w + 20, el.y + h);\n            ctx.lineTo(el.x + w, el.y);\n            ctx.lineTo(el.x, el.y);\n            ctx.closePath();\n            ctx.fill();\n            break;\n          case \"rhombus\":\n            ctx.beginPath();\n            ctx.moveTo(el.x + w / 2, el.y);\n            ctx.lineTo(el.x + w, el.y + h / 2);\n            ctx.lineTo(el.x + w / 2, el.y + h);\n            ctx.lineTo(el.x, el.y + h / 2);\n            ctx.closePath();\n            ctx.fill();\n            break;\n          case \"trapezoid\":\n            ctx.beginPath();\n            ctx.moveTo(el.x + 20, el.y + h);\n            ctx.lineTo(el.x + w - 20, el.y + h);\n            ctx.lineTo(el.x + w, el.y);\n            ctx.lineTo(el.x, el.y);\n            ctx.closePath();\n            ctx.fill();\n            break;\n          case \"kite\":\n            ctx.beginPath();\n            ctx.moveTo(el.x + w / 2, el.y);\n            ctx.lineTo(el.x + w, el.y + h / 2);\n            ctx.lineTo(el.x + w / 2, el.y + h);\n            ctx.lineTo(el.x, el.y + h / 2);\n            ctx.closePath();\n            ctx.fill();\n            break;\n          default:\n            if (el.type.startsWith(\"penta\") || el.type.endsWith(\"gon\")) {\n              const map = {\n                pentagon: 5,\n                hexagon: 6,\n                heptagon: 7,\n                octagon: 8,\n                nonagon: 9,\n                decagon: 10\n              };\n              const sides = map[el.type] || 5;\n              drawPolygon(ctx, el.x + w / 2, el.y + h / 2, Math.min(w, h) / 2, sides, el.color);\n            }\n            break;\n        }\n        if (idx === selectedIdx) {\n          ctx.strokeStyle = \"#f59e42\";\n          ctx.lineWidth = 2;\n          ctx.strokeRect(el.x - 2, el.y - 2, w + 4, h + 4);\n          drawHandles(ctx, el.x, el.y, w, h);\n        }\n      }\n      ctx.restore();\n    });\n    lines.forEach(line => {\n      ctx.beginPath();\n      ctx.strokeStyle = line.mode === \"eraser\" ? \"rgba(0,0,0,1)\" : line.color || \"#333\";\n      ctx.lineWidth = line.size || 2;\n      ctx.globalCompositeOperation = line.mode === \"eraser\" ? \"destination-out\" : \"source-over\";\n      line.points.forEach(([x, y], i) => {\n        if (i === 0) ctx.moveTo(x, y);else ctx.lineTo(x, y);\n      });\n      ctx.stroke();\n      ctx.globalCompositeOperation = \"source-over\";\n    });\n  }, [elements, lines, imageCache, selectedIdx]);\n  function drawHandles(ctx, x, y, w, h) {\n    const handles = [[x - HANDLE_SIZE / 2, y - HANDLE_SIZE / 2], [x + w - HANDLE_SIZE / 2, y - HANDLE_SIZE / 2], [x - HANDLE_SIZE / 2, y + h - HANDLE_SIZE / 2], [x + w - HANDLE_SIZE / 2, y + h - HANDLE_SIZE / 2]];\n    handles.forEach(([hx, hy]) => {\n      ctx.fillStyle = \"#fff\";\n      ctx.strokeStyle = \"#333\";\n      ctx.lineWidth = 1;\n      ctx.fillRect(hx, hy, HANDLE_SIZE, HANDLE_SIZE);\n      ctx.strokeRect(hx, hy, HANDLE_SIZE, HANDLE_SIZE);\n    });\n  }\n  const saveState = (newElements, newLines, newTitle = designName) => {\n    const newHistory = history.slice(0, historyIndex + 1);\n    newHistory.push({\n      elements: JSON.parse(JSON.stringify(newElements)),\n      lines: JSON.parse(JSON.stringify(newLines)),\n      title: newTitle\n    });\n    setHistory(newHistory);\n    setHistoryIndex(newHistory.length - 1);\n    setDesignName(newTitle);\n  };\n  const handleUndo = () => {\n    if (historyIndex > 0) {\n      setHistoryIndex(historyIndex - 1);\n      setSelectedIdx(null);\n    }\n  };\n  const handleRedo = () => {\n    if (historyIndex < history.length - 1) {\n      setHistoryIndex(historyIndex + 1);\n      setSelectedIdx(null);\n    }\n  };\n  const getHandleAt = (el, mouseX, mouseY) => {\n    const {\n      w,\n      h\n    } = el;\n    const handles = [[el.x - HANDLE_SIZE / 2, el.y - HANDLE_SIZE / 2], [el.x + w - HANDLE_SIZE / 2, el.y - HANDLE_SIZE / 2], [el.x - HANDLE_SIZE / 2, el.y + h - HANDLE_SIZE / 2], [el.x + w - HANDLE_SIZE / 2, el.y + h - HANDLE_SIZE / 2]];\n    for (let i = 0; i < handles.length; i++) {\n      const [hx, hy] = handles[i];\n      if (mouseX >= hx && mouseX <= hx + HANDLE_SIZE && mouseY >= hy && mouseY <= hy + HANDLE_SIZE) return i;\n    }\n    return null;\n  };\n  const handleCanvasMouseDown = e => {\n    if (!canvasRef.current) return;\n    const rect = canvasRef.current.getBoundingClientRect();\n    const mouseX = e.nativeEvent.offsetX;\n    const mouseY = e.nativeEvent.offsetY;\n    let clicked = false;\n    for (let i = elements.length - 1; i >= 0; i--) {\n      const el = elements[i];\n      const handleIdx = getHandleAt(el, mouseX, mouseY);\n      if (i === selectedIdx && handleIdx !== null) {\n        setResizingHandle(handleIdx);\n        clicked = true;\n        break;\n      }\n      if (mouseX >= el.x && mouseX <= el.x + el.w && mouseY >= el.y && mouseY <= el.y + el.h) {\n        setSelectedIdx(i);\n        setDragOffset({\n          x: mouseX - el.x,\n          y: mouseY - el.y\n        });\n        setIsDragging(true);\n        clicked = true;\n        break;\n      }\n    }\n    if (!clicked) setSelectedIdx(null);\n    if (drawMode || eraserMode) {\n      setIsDrawing(true);\n      drawingPointsRef.current = [[mouseX, mouseY]];\n    }\n  };\n  const handleCanvasMouseMove = e => {\n    if (!canvasRef.current) return;\n    const mouseX = e.nativeEvent.offsetX;\n    const mouseY = e.nativeEvent.offsetY;\n    if (resizingHandle !== null && selectedIdx !== null) {\n      const el = elements[selectedIdx];\n      const newEl = {\n        ...el\n      };\n      if (resizingHandle === 0) {\n        newEl.x = mouseX;\n        newEl.y = mouseY;\n        newEl.w = el.w + (el.x - mouseX);\n        newEl.h = el.h + (el.y - mouseY);\n      } else if (resizingHandle === 1) {\n        newEl.y = mouseY;\n        newEl.w = mouseX - el.x;\n        newEl.h = el.h + (el.y - mouseY);\n      } else if (resizingHandle === 2) {\n        newEl.x = mouseX;\n        newEl.w = el.w + (el.x - mouseX);\n        newEl.h = mouseY - el.y;\n      } else if (resizingHandle === 3) {\n        newEl.w = mouseX - el.x;\n        newEl.h = mouseY - el.y;\n      }\n      newEl.w = Math.max(20, newEl.w);\n      newEl.h = Math.max(20, newEl.h);\n      if (el.type === \"text\") newEl.fontSize = Math.max(12, newEl.h - 8);\n      const newElements = elements.map((s, idx) => idx === selectedIdx ? newEl : s);\n      setHistory(h => {\n        const newHistory = h.slice(0, historyIndex + 1);\n        newHistory[historyIndex] = {\n          elements: newElements,\n          lines\n        };\n        return newHistory;\n      });\n      return;\n    }\n    if (isDragging && selectedIdx !== null) {\n      const newElements = elements.map((s, idx) => idx === selectedIdx ? {\n        ...s,\n        x: mouseX - dragOffset.x,\n        y: mouseY - dragOffset.y\n      } : s);\n      setHistory(h => {\n        const newHistory = h.slice(0, historyIndex + 1);\n        newHistory[historyIndex] = {\n          elements: newElements,\n          lines\n        };\n        return newHistory;\n      });\n    }\n    if (isDrawing && (drawMode || eraserMode)) {\n      const ctx = canvasRef.current.getContext(\"2d\");\n      const points = drawingPointsRef.current;\n      points.push([mouseX, mouseY]);\n      ctx.beginPath();\n      ctx.moveTo(points[points.length - 2][0], points[points.length - 2][1]);\n      ctx.lineTo(mouseX, mouseY);\n      ctx.lineWidth = eraserMode ? eraserSize : brushSize;\n      ctx.strokeStyle = eraserMode ? \"rgba(0,0,0,1)\" : pencilColor;\n      ctx.globalCompositeOperation = eraserMode ? \"destination-out\" : \"source-over\";\n      ctx.stroke();\n      ctx.globalCompositeOperation = \"source-over\";\n    }\n  };\n  const handleCanvasMouseUp = () => {\n    if (isDrawing) {\n      if (!canvasRef.current) return;\n      const newLine = {\n        id: nextId++,\n        points: drawingPointsRef.current,\n        color: pencilColor,\n        size: eraserMode ? eraserSize : brushSize,\n        mode: eraserMode ? \"eraser\" : \"draw\"\n      };\n      saveState(elements, [...lines, newLine], designName);\n    }\n    if (resizingHandle !== null) setResizingHandle(null);\n    if (isDragging) setIsDragging(false);\n    setIsDrawing(false);\n  };\n  const handleAddShape = () => {\n    if (!canvasRef.current) return;\n    const ctx = canvasRef.current.getContext(\"2d\");\n    const {\n      w,\n      h\n    } = getDefaultSize(selectedShape, \"\", ctx);\n    const newElement = {\n      id: nextId++,\n      type: selectedShape,\n      x: 300,\n      y: 100,\n      color: shapeColor,\n      w,\n      h,\n      rotation: 0\n    };\n    if (selectedShape === \"image\") return;\n    saveState([...elements, newElement], lines, designName);\n  };\n  const handleAddText = () => {\n    if (!canvasRef.current) return;\n    const text = prompt(\"Enter text to add:\");\n    if (!text) return;\n    const ctx = canvasRef.current.getContext(\"2d\");\n    ctx.font = `24px ${fontFamily}`;\n    const {\n      w,\n      h,\n      fontSize\n    } = getDefaultSize(\"text\", text, ctx);\n    const newText = {\n      id: nextId++,\n      type: \"text\",\n      text,\n      x: 100,\n      y: 100,\n      color: textColor,\n      w,\n      h,\n      fontSize,\n      fontFamily,\n      rotation: 0\n    };\n    saveState([...elements, newText], lines, designName);\n  };\n  const handleShapeColorChange = e => {\n    setShapeColor(e.target.value);\n    if (selectedIdx !== null) {\n      const newElements = elements.map((el, idx) => idx === selectedIdx ? {\n        ...el,\n        color: e.target.value\n      } : el);\n      saveState(newElements, lines, designName);\n    }\n  };\n  const handleTextColorChange = e => {\n    var _elements$selectedIdx;\n    setTextColor(e.target.value);\n    if (selectedIdx !== null && ((_elements$selectedIdx = elements[selectedIdx]) === null || _elements$selectedIdx === void 0 ? void 0 : _elements$selectedIdx.type) === \"text\") {\n      const newElements = elements.map((el, idx) => idx === selectedIdx ? {\n        ...el,\n        color: e.target.value\n      } : el);\n      saveState(newElements, lines, designName);\n    }\n  };\n  const handleUploadImage = () => fileInputRef.current.click();\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = function (event) {\n      const newElement = {\n        id: nextId++,\n        type: \"image\",\n        x: 50,\n        y: 50,\n        w: 200,\n        h: 200,\n        src: event.target.result,\n        rotation: 0\n      };\n      saveState([...elements, newElement], lines, designName);\n    };\n    reader.readAsDataURL(file);\n    e.target.value = \"\";\n  };\n  const moveElement = dir => {\n    if (selectedIdx === null) return;\n    const newElements = [...elements];\n    let idx = selectedIdx;\n    if (dir === \"up\" && idx < newElements.length - 1) {\n      [newElements[idx], newElements[idx + 1]] = [newElements[idx + 1], newElements[idx]];\n      setSelectedIdx(idx + 1);\n    }\n    if (dir === \"down\" && idx > 0) {\n      [newElements[idx], newElements[idx - 1]] = [newElements[idx - 1], newElements[idx]];\n      setSelectedIdx(idx - 1);\n    }\n    saveState(newElements, lines, designName);\n  };\n  const clearCanvas = () => {\n    setHistory([{\n      elements: [],\n      lines: [],\n      title: designName\n    }]);\n    setHistoryIndex(0);\n    setSelectedIdx(null);\n  };\n  const handleDownload = () => {\n    if (!canvasRef.current) return;\n    const link = document.createElement(\"a\");\n    link.download = (designName.trim() || \"canvas\") + \".png\";\n    link.href = canvasRef.current.toDataURL();\n    link.click();\n  };\n  const handleDeleteSelected = () => {\n    if (selectedIdx !== null) {\n      const newElements = elements.filter((_, idx) => idx !== selectedIdx);\n      saveState(newElements, lines, designName);\n      setSelectedIdx(null);\n    }\n  };\n  const handleSaveToCloud = async () => {\n    setSaveMessage(\"\");\n    try {\n      const token = localStorage.getItem(\"token\");\n      const imageDataURL = canvasRef.current.toDataURL(\"image/png\");\n      const imageBlob = dataURLtoBlob(imageDataURL);\n      const formData = new FormData();\n      formData.append(\"file\", imageBlob);\n      formData.append(\"upload_preset\", \"MattyDesignTool\");\n      const res = await fetch(\"https://api.cloudinary.com/v1_1/dvxazjesy/image/upload\", {\n        method: \"POST\",\n        body: formData\n      });\n      const data = await res.json();\n      const thumbnailUrl = data.secure_url;\n      const jsonData = {\n        elements,\n        lines,\n        title: designName\n      };\n      let response;\n      if (designId) {\n        response = await fetch(`http://localhost:5000/api/designs/${designId}`, {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n          },\n          body: JSON.stringify({\n            title: designName,\n            thumbnailUrl,\n            jsonData\n          })\n        });\n      } else {\n        response = await fetch(\"http://localhost:5000/api/designs\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n          },\n          body: JSON.stringify({\n            title: designName,\n            thumbnailUrl,\n            jsonData\n          })\n        });\n      }\n      if (!response.ok) throw new Error(\"Failed to save design!\");\n      setSaveMessage(\"✅ Design saved successfully!\");\n    } catch (err) {\n      setSaveMessage(\"❌ Save failed: \" + err.message);\n    }\n  };\n\n  // simple animation variants\n  const fadeIn = {\n    hidden: {\n      opacity: 0,\n      y: 8\n    },\n    visible: {\n      opacity: 1,\n      y: 0\n    }\n  };\n  const stagger = {\n    visible: {\n      transition: {\n        staggerChildren: 0.06\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col min-h-screen bg-gradient-to-b from-[#f8fafc] to-[#f1f5f9]\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"flex justify-between items-center p-4 bg-gradient-to-r from-[#0ea5e9] via-[#8b5cf6] to-[#ef4444] text-white shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"flex items-center gap-3 cursor-pointer\",\n        onClick: () => navigate(\"/dashboard\"),\n        whileHover: {\n          scale: 1.03\n        },\n        whileTap: {\n          scale: 0.98\n        },\n        title: \"Go to Dashboard\",\n        children: [/*#__PURE__*/_jsxDEV(motion.div, {\n          className: \"text-4xl font-extrabold\",\n          style: {\n            fontFamily: '\"Kablammo\", system-ui'\n          },\n          initial: {\n            rotate: -6\n          },\n          animate: {\n            rotate: 0\n          },\n          transition: {\n            type: \"spring\",\n            stiffness: 120\n          },\n          children: \"MATTY\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n          className: \"text-sm opacity-90\",\n          children: \"Design Studio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 600,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"flex items-center gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(motion.button, {\n          className: \"px-3 py-1 bg-white/20 rounded backdrop-blur-sm border border-white/30 text-sm\",\n          whileHover: {\n            scale: 1.04\n          },\n          onClick: () => {\n            // quick save to cloud\n            handleSaveToCloud();\n          },\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n          className: \"px-3 py-1 bg-white/20 rounded backdrop-blur-sm border border-white/30 text-sm\",\n          whileHover: {\n            scale: 1.04\n          },\n          onClick: () => handleDownload(),\n          children: \"Export\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 583,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-4 p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n        className: \"w-72 flex-shrink-0\",\n        children: [/*#__PURE__*/_jsxDEV(AnimatePresence, {\n          children: /*#__PURE__*/_jsxDEV(motion.div, {\n            className: \"bg-white rounded-xl p-4 shadow-md\",\n            initial: {\n              opacity: 0,\n              x: -12\n            },\n            animate: {\n              opacity: 1,\n              x: 0\n            },\n            exit: {\n              opacity: 0,\n              x: -12\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold text-lg mb-3 border-b pb-2\",\n              children: \"Tools\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 634,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n              className: \"grid gap-3\",\n              variants: stagger,\n              initial: \"hidden\",\n              animate: \"visible\",\n              children: [/*#__PURE__*/_jsxDEV(motion.div, {\n                className: \"flex gap-2\",\n                variants: fadeIn,\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `flex-1 py-2 rounded ${drawMode && !eraserMode ? \"bg-gradient-to-r from-[#a78bfa] to-[#60a5fa] text-white\" : \"bg-gray-100\"}`,\n                  onClick: () => {\n                    if (drawMode) setDrawMode(false);else {\n                      setDrawMode(true);\n                      setEraserMode(false);\n                    }\n                  },\n                  children: \"Pencil\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 638,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `py-2 px-3 rounded ${eraserMode ? \"bg-gradient-to-r from-[#fda4af] to-[#feb2b2] text-white\" : \"bg-gray-100\"}`,\n                  onClick: () => {\n                    if (eraserMode) setEraserMode(false);else {\n                      setEraserMode(true);\n                      setDrawMode(false);\n                    }\n                  },\n                  children: \"Eraser\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 650,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 637,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n                variants: fadeIn,\n                className: \"flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"text-sm\",\n                  children: \"Pencil\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 665,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"color\",\n                  value: pencilColor,\n                  onChange: e => setPencilColor(e.target.value),\n                  className: \"w-8 h-8 p-0 border-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 666,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"range\",\n                  min: 1,\n                  max: 30,\n                  value: brushSize,\n                  onChange: e => setBrushSize(Number(e.target.value)),\n                  className: \"flex-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 667,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs\",\n                  children: [brushSize, \"px\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 668,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 664,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n                variants: fadeIn,\n                className: \"flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"text-sm\",\n                  children: \"Eraser\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 672,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"range\",\n                  min: 5,\n                  max: 50,\n                  value: eraserSize,\n                  onChange: e => setEraserSize(Number(e.target.value)),\n                  className: \"flex-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 673,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs\",\n                  children: [eraserSize, \"px\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 674,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 671,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n                variants: fadeIn,\n                className: \"flex items-center gap-2\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"w-full py-2 rounded bg-gray-100 hover:bg-gray-50\",\n                  onClick: clearCanvas,\n                  children: \"Clear\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 678,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 677,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 636,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n          className: \"mt-4 bg-white rounded-xl p-4 shadow-md\",\n          initial: {\n            opacity: 0,\n            x: -10\n          },\n          animate: {\n            opacity: 1,\n            x: 0\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-lg mb-3 border-b pb-2\",\n            children: \"Shapes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 685,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"mb-3 p-2 border rounded w-full\",\n            value: selectedShape,\n            onChange: e => {\n              setSelectedShape(e.target.value);\n              setDrawMode(false);\n              setEraserMode(false);\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"rectangle\",\n              children: \"Rectangle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 687,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"square\",\n              children: \"Square\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 688,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"circle\",\n              children: \"Circle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 689,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"oval\",\n              children: \"Oval\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"triangle\",\n              children: \"Triangle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 691,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"parallelogram\",\n              children: \"Parallelogram\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 692,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"rhombus\",\n              children: \"Rhombus\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 693,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"trapezoid\",\n              children: \"Trapezoid\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 694,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"kite\",\n              children: \"Kite\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 695,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"pentagon\",\n              children: \"Pentagon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 696,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"hexagon\",\n              children: \"Hexagon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 697,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"heptagon\",\n              children: \"Heptagon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 698,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"octagon\",\n              children: \"Octagon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 699,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"nonagon\",\n              children: \"Nonagon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 700,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"decagon\",\n              children: \"Decagon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 701,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 686,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"color\",\n              value: shapeColor,\n              onChange: handleShapeColorChange,\n              className: \"w-10 h-10 p-0 border-0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 704,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"flex-1 py-2 rounded bg-gradient-to-r from-[#a78bfa] to-[#60a5fa] text-white\",\n              onClick: handleAddShape,\n              children: \"Add Shape\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 705,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 703,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"flex-1 py-2 rounded bg-gray-100\",\n              onClick: () => moveElement('up'),\n              disabled: selectedIdx === null,\n              children: \"Move Up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 709,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"flex-1 py-2 rounded bg-gray-100\",\n              onClick: () => moveElement('down'),\n              disabled: selectedIdx === null,\n              children: \"Move Down\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 710,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 708,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 684,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n          className: \"mt-4 bg-white rounded-xl p-4 shadow-md\",\n          initial: {\n            opacity: 0,\n            x: -10\n          },\n          animate: {\n            opacity: 1,\n            x: 0\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-lg mb-3 border-b pb-2\",\n            children: \"Text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 715,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm mb-1\",\n            children: \"Font\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 716,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"mb-3 p-2 border rounded w-full\",\n            value: fontFamily,\n            onChange: e => {\n              var _elements$selectedIdx2;\n              setFontFamily(e.target.value);\n              if (selectedIdx !== null && ((_elements$selectedIdx2 = elements[selectedIdx]) === null || _elements$selectedIdx2 === void 0 ? void 0 : _elements$selectedIdx2.type) === \"text\") {\n                const newElements = elements.map((el, idx) => idx === selectedIdx ? {\n                  ...el,\n                  fontFamily: e.target.value\n                } : el);\n                saveState(newElements, lines, designName);\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Arial\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 718,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Times New Roman\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 719,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Georgia\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 720,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Courier New\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 721,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Verdana\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 722,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Trebuchet MS\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 723,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Helvetica\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 724,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Impact\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 725,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 717,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"color\",\n              value: textColor,\n              onChange: handleTextColorChange,\n              className: \"w-10 h-10 p-0 border-0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 728,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"flex-1 py-2 rounded bg-gradient-to-r from-[#34d399] to-[#10b981] text-white\",\n              onClick: handleAddText,\n              children: \"Add Text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 729,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 727,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 714,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n          className: \"mt-4 bg-white rounded-xl p-4 shadow-md\",\n          initial: {\n            opacity: 0,\n            x: -10\n          },\n          animate: {\n            opacity: 1,\n            x: 0\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-lg mb-3 border-b pb-2\",\n            children: \"Export / Images\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 734,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"py-2 rounded bg-gray-100\",\n              onClick: handleUploadImage,\n              children: \"Upload Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 736,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"py-2 rounded bg-gradient-to-r from-[#fde68a] to-[#fca5a5]\",\n              onClick: handleSaveToCloud,\n              children: \"Save to Cloud\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 737,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"py-2 rounded bg-gray-100\",\n              onClick: handleDownload,\n              children: \"Download\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 738,\n              columnNumber: 15\n            }, this), saveMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `mt-2 p-2 rounded text-sm ${saveMessage.startsWith('✅') ? 'bg-green-50 text-green-700' : 'bg-red-50 text-red-700'}`,\n              children: saveMessage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 739,\n              columnNumber: 31\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 735,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            ref: fileInputRef,\n            style: {\n              display: 'none'\n            },\n            onChange: handleFileChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 741,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 733,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"flex-1 flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(motion.div, {\n          className: \"bg-white rounded-2xl shadow-2xl p-6\",\n          initial: {\n            scale: 0.98,\n            opacity: 0\n          },\n          animate: {\n            scale: 1,\n            opacity: 1\n          },\n          transition: {\n            type: 'spring',\n            stiffness: 120\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"border px-3 py-2 rounded font-medium text-lg w-96\",\n              placeholder: \"Enter design name\",\n              value: designName,\n              onChange: e => {\n                const newTitle = e.target.value;\n                setDesignName(newTitle);\n                saveState(elements, lines, newTitle);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 752,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"px-3 py-1 rounded bg-gray-100\",\n                onClick: handleUndo,\n                disabled: historyIndex === 0,\n                children: \"Undo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 754,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"px-3 py-1 rounded bg-gray-100\",\n                onClick: handleRedo,\n                disabled: historyIndex === history.length - 1,\n                children: \"Redo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 755,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"px-3 py-1 rounded bg-red-100 text-red-700\",\n                onClick: handleDeleteSelected,\n                disabled: selectedIdx === null,\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 756,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 753,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 751,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-[1000px] h-[700px] rounded-lg overflow-hidden border border-gray-200\",\n            children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n              ref: canvasRef,\n              width: 1000,\n              height: 700,\n              style: {\n                background: 'linear-gradient(180deg, #ffffff 0%, #f8fafc 100%)'\n              },\n              onMouseDown: handleCanvasMouseDown,\n              onMouseMove: handleCanvasMouseMove,\n              onMouseUp: handleCanvasMouseUp,\n              onMouseLeave: handleCanvasMouseUp\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 761,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 760,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4 flex items-center justify-between text-sm text-gray-600\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Selected: \", selectedIdx !== null ? ((_elements$selectedIdx3 = elements[selectedIdx]) === null || _elements$selectedIdx3 === void 0 ? void 0 : _elements$selectedIdx3.type) || '—' : 'None']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 771,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"flex items-center gap-2\",\n                children: [\"Rotation\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"range\",\n                  min: 0,\n                  max: 360,\n                  value: selectedIdx !== null ? elements[selectedIdx].rotation || 0 : 0,\n                  onChange: e => {\n                    if (selectedIdx !== null) {\n                      const angle = Number(e.target.value);\n                      const newElements = elements.map((el, idx) => idx === selectedIdx ? {\n                        ...el,\n                        rotation: angle\n                      } : el);\n                      saveState(newElements, lines, designName);\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 774,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 773,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [selectedIdx !== null ? elements[selectedIdx].rotation || 0 : 0, \"\\xB0\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 776,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 772,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 770,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 746,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 745,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 625,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 582,\n    columnNumber: 5\n  }, this);\n}\n_s(CanvasEditor, \"ux+qH+fy8FSZui/Zw0Y0oD5r0S0=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = CanvasEditor;\nvar _c;\n$RefreshReg$(_c, \"CanvasEditor\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useParams","useNavigate","motion","AnimatePresence","jsxDEV","_jsxDEV","dataURLtoBlob","dataurl","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","Blob","type","drawPolygon","ctx","x","y","radius","sides","color","beginPath","i","angle","Math","PI","dx","cos","dy","sin","moveTo","lineTo","closePath","fillStyle","fill","HANDLE_SIZE","nextId","getDefaultSize","text","w","h","font","measureText","width","fontSize","CanvasEditor","initialData","_s","_elements$selectedIdx3","canvasRef","fileInputRef","id","designId","navigate","saveMessage","setSaveMessage","designName","setDesignName","selectedShape","setSelectedShape","shapeColor","setShapeColor","drawMode","setDrawMode","eraserMode","setEraserMode","eraserSize","setEraserSize","textColor","setTextColor","pencilColor","setPencilColor","brushSize","setBrushSize","dragOffset","setDragOffset","selectedIdx","setSelectedIdx","isDragging","setIsDragging","isDrawing","setIsDrawing","resizingHandle","setResizingHandle","drawingPointsRef","fontFamily","setFontFamily","history","setHistory","elements","lines","title","historyIndex","setHistoryIndex","imageCache","setImageCache","_initialData$jsonData","_initialData$jsonData2","jsonData","forEach","el","src","img","window","Image","onload","c","current","canvas","getContext","clearRect","height","lineCap","lineWidth","idx","save","cx","cy","translate","rotate","rotation","drawImage","strokeStyle","strokeRect","drawHandles","fillText","boxW","boxH","fillRect","arc","scale","restore","startsWith","endsWith","map","pentagon","hexagon","heptagon","octagon","nonagon","decagon","min","line","mode","size","globalCompositeOperation","points","stroke","handles","hx","hy","saveState","newElements","newLines","newTitle","newHistory","slice","push","JSON","parse","stringify","handleUndo","handleRedo","getHandleAt","mouseX","mouseY","handleCanvasMouseDown","e","rect","getBoundingClientRect","nativeEvent","offsetX","offsetY","clicked","handleIdx","handleCanvasMouseMove","newEl","max","s","handleCanvasMouseUp","newLine","handleAddShape","newElement","handleAddText","prompt","newText","handleShapeColorChange","target","value","handleTextColorChange","_elements$selectedIdx","handleUploadImage","click","handleFileChange","file","files","reader","FileReader","event","result","readAsDataURL","moveElement","dir","clearCanvas","handleDownload","link","document","createElement","download","trim","href","toDataURL","handleDeleteSelected","filter","_","handleSaveToCloud","token","localStorage","getItem","imageDataURL","imageBlob","formData","FormData","append","res","fetch","method","body","data","json","thumbnailUrl","secure_url","response","headers","Authorization","ok","Error","err","message","fadeIn","hidden","opacity","visible","stagger","transition","staggerChildren","className","children","div","onClick","whileHover","whileTap","style","initial","animate","stiffness","fileName","_jsxFileName","lineNumber","columnNumber","button","exit","variants","onChange","Number","disabled","_elements$selectedIdx2","accept","ref","display","placeholder","background","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","_c","$RefreshReg$"],"sources":["C:/Users/91822/Piyush/Desktop/Week -6/Week-6_final_project/matty-project/client/src/components/CanvasEditor.jsx"],"sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\n// Helper: convert dataURL to Blob (for Cloud upload)\r\nfunction dataURLtoBlob(dataurl) {\r\n  var arr = dataurl.split(\",\"),\r\n    mime = arr[0].match(/:(.*?);/)[1],\r\n    bstr = atob(arr[1]),\r\n    n = bstr.length,\r\n    u8arr = new Uint8Array(n);\r\n  while (n--) u8arr[n] = bstr.charCodeAt(n);\r\n  return new Blob([u8arr], { type: mime });\r\n}\r\n\r\nfunction drawPolygon(ctx, x, y, radius, sides, color) {\r\n  ctx.beginPath();\r\n  for (let i = 0; i < sides; i++) {\r\n    const angle = (2 * Math.PI * i) / sides - Math.PI / 2;\r\n    const dx = x + radius * Math.cos(angle);\r\n    const dy = y + radius * Math.sin(angle);\r\n    if (i === 0) ctx.moveTo(dx, dy);\r\n    else ctx.lineTo(dx, dy);\r\n  }\r\n  ctx.closePath();\r\n  ctx.fillStyle = color;\r\n  ctx.fill();\r\n}\r\n\r\nconst HANDLE_SIZE = 16;\r\nlet nextId = 1;\r\n\r\nconst getDefaultSize = (type, text, ctx) => {\r\n  if (type === \"rectangle\") return { w: 120, h: 80 };\r\n  if (type === \"square\" || type === \"circle\") return { w: 100, h: 100 };\r\n  if (type === \"oval\") return { w: 120, h: 80 };\r\n  if (type === \"image\") return { w: 200, h: 200 };\r\n  if (type === \"text\") {\r\n    ctx.font = \"24px Arial\";\r\n    return { w: ctx.measureText(text).width, h: 32, fontSize: 24 };\r\n  }\r\n  return { w: 120, h: 80 };\r\n};\r\n\r\nexport default function CanvasEditor({ initialData }) {\r\n  const canvasRef = useRef(null);\r\n  const fileInputRef = useRef(null);\r\n  const { id: designId } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  // UI state\r\n  const [saveMessage, setSaveMessage] = useState(\"\");\r\n  const [designName, setDesignName] = useState(\"\");\r\n  const [selectedShape, setSelectedShape] = useState(\"rectangle\");\r\n  const [shapeColor, setShapeColor] = useState(\"#4f46e5\");\r\n  const [drawMode, setDrawMode] = useState(false);\r\n  const [eraserMode, setEraserMode] = useState(false);\r\n  const [eraserSize, setEraserSize] = useState(20);\r\n  const [textColor, setTextColor] = useState(\"#111827\");\r\n  const [pencilColor, setPencilColor] = useState(\"#333\");\r\n  const [brushSize, setBrushSize] = useState(2);\r\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\r\n  const [selectedIdx, setSelectedIdx] = useState(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [isDrawing, setIsDrawing] = useState(false);\r\n  const [resizingHandle, setResizingHandle] = useState(null);\r\n  const drawingPointsRef = useRef([]);\r\n  const [fontFamily, setFontFamily] = useState(\"Arial\");\r\n\r\n  // history state\r\n  const [history, setHistory] = useState([\r\n    { elements: [], lines: [], title: \"\" },\r\n  ]);\r\n  const [historyIndex, setHistoryIndex] = useState(0);\r\n  const [imageCache, setImageCache] = useState({});\r\n\r\n  // derive current elements & lines\r\n  const { elements, lines } = history[historyIndex] || {\r\n    elements: [],\r\n    lines: [],\r\n  };\r\n\r\n  useEffect(() => {\r\n    setHistory([\r\n      {\r\n        elements: initialData?.jsonData?.elements || [],\r\n        lines: initialData?.jsonData?.lines || [],\r\n        title: initialData?.title || \"\",\r\n      },\r\n    ]);\r\n    setHistoryIndex(0);\r\n    setDesignName(initialData?.title || \"Untitled\");\r\n  }, [initialData]);\r\n\r\n  // preload images into cache\r\n  useEffect(() => {\r\n    elements.forEach((el) => {\r\n      if (el.type === \"image\" && el.src && !imageCache[el.id]) {\r\n        const img = new window.Image();\r\n        img.src = el.src;\r\n        img.onload = () => setImageCache((c) => ({ ...c, [el.id]: img }));\r\n      }\r\n    });\r\n  }, [elements, imageCache]);\r\n\r\n  // drawing/render loop\r\n  useEffect(() => {\r\n    if (!canvasRef.current) return;\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext(\"2d\");\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    ctx.lineCap = \"round\";\r\n    ctx.lineWidth = 2;\r\n\r\n    elements.forEach((el, idx) => {\r\n      ctx.save();\r\n      const w = el.w,\r\n        h = el.h;\r\n      const cx = el.x + w / 2;\r\n      const cy = el.y + h / 2;\r\n      ctx.translate(cx, cy);\r\n      ctx.rotate(((el.rotation || 0) * Math.PI) / 180);\r\n      ctx.translate(-cx, -cy);\r\n\r\n      if (el.type === \"image\") {\r\n        const img = imageCache[el.id];\r\n        if (img) {\r\n          ctx.drawImage(img, el.x, el.y, w, h);\r\n          if (idx === selectedIdx) {\r\n            ctx.strokeStyle = \"#f59e42\";\r\n            ctx.lineWidth = 2;\r\n            ctx.strokeRect(el.x - 2, el.y - 2, w + 4, h + 4);\r\n            drawHandles(ctx, el.x, el.y, w, h);\r\n          }\r\n        }\r\n      } else if (el.type === \"text\") {\r\n        ctx.font = `${el.fontSize || 24}px ${el.fontFamily || \"Arial\"}`;\r\n        ctx.fillStyle = el.color;\r\n        ctx.fillText(el.text, el.x, el.y + (el.fontSize || 24));\r\n        const boxW = el.w;\r\n        const boxH = el.h || (el.fontSize || 24) + 8;\r\n        if (idx === selectedIdx) {\r\n          ctx.strokeStyle = \"#f59e42\";\r\n          ctx.strokeRect(el.x - 2, el.y - 2, boxW + 4, boxH + 4);\r\n          drawHandles(ctx, el.x, el.y, boxW, boxH);\r\n        }\r\n      } else {\r\n        ctx.fillStyle = el.color;\r\n        ctx.strokeStyle = el.color;\r\n        switch (el.type) {\r\n          case \"rectangle\":\r\n          case \"square\":\r\n            ctx.fillRect(el.x, el.y, w, h);\r\n            break;\r\n          case \"circle\":\r\n            ctx.beginPath();\r\n            ctx.arc(el.x + w / 2, el.y + h / 2, w / 2, 0, 2 * Math.PI);\r\n            ctx.fill();\r\n            break;\r\n          case \"oval\":\r\n            ctx.save();\r\n            ctx.translate(el.x + w / 2, el.y + h / 2);\r\n            ctx.scale(1.5, 1);\r\n            ctx.beginPath();\r\n            ctx.arc(0, 0, h / 2, 0, 2 * Math.PI);\r\n            ctx.restore();\r\n            ctx.fill();\r\n            break;\r\n          case \"triangle\":\r\n            ctx.beginPath();\r\n            ctx.moveTo(el.x, el.y + h);\r\n            ctx.lineTo(el.x + w, el.y + h);\r\n            ctx.lineTo(el.x + w / 2, el.y);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n            break;\r\n          case \"parallelogram\":\r\n            ctx.beginPath();\r\n            ctx.moveTo(el.x + 20, el.y + h);\r\n            ctx.lineTo(el.x + w + 20, el.y + h);\r\n            ctx.lineTo(el.x + w, el.y);\r\n            ctx.lineTo(el.x, el.y);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n            break;\r\n          case \"rhombus\":\r\n            ctx.beginPath();\r\n            ctx.moveTo(el.x + w / 2, el.y);\r\n            ctx.lineTo(el.x + w, el.y + h / 2);\r\n            ctx.lineTo(el.x + w / 2, el.y + h);\r\n            ctx.lineTo(el.x, el.y + h / 2);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n            break;\r\n          case \"trapezoid\":\r\n            ctx.beginPath();\r\n            ctx.moveTo(el.x + 20, el.y + h);\r\n            ctx.lineTo(el.x + w - 20, el.y + h);\r\n            ctx.lineTo(el.x + w, el.y);\r\n            ctx.lineTo(el.x, el.y);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n            break;\r\n          case \"kite\":\r\n            ctx.beginPath();\r\n            ctx.moveTo(el.x + w / 2, el.y);\r\n            ctx.lineTo(el.x + w, el.y + h / 2);\r\n            ctx.lineTo(el.x + w / 2, el.y + h);\r\n            ctx.lineTo(el.x, el.y + h / 2);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n            break;\r\n          default:\r\n            if (el.type.startsWith(\"penta\") || el.type.endsWith(\"gon\")) {\r\n              const map = {\r\n                pentagon: 5,\r\n                hexagon: 6,\r\n                heptagon: 7,\r\n                octagon: 8,\r\n                nonagon: 9,\r\n                decagon: 10,\r\n              };\r\n              const sides = map[el.type] || 5;\r\n              drawPolygon(ctx, el.x + w / 2, el.y + h / 2, Math.min(w, h) / 2, sides, el.color);\r\n            }\r\n            break;\r\n        }\r\n        if (idx === selectedIdx) {\r\n          ctx.strokeStyle = \"#f59e42\";\r\n          ctx.lineWidth = 2;\r\n          ctx.strokeRect(el.x - 2, el.y - 2, w + 4, h + 4);\r\n          drawHandles(ctx, el.x, el.y, w, h);\r\n        }\r\n      }\r\n      ctx.restore();\r\n    });\r\n\r\n    lines.forEach((line) => {\r\n      ctx.beginPath();\r\n      ctx.strokeStyle = line.mode === \"eraser\" ? \"rgba(0,0,0,1)\" : line.color || \"#333\";\r\n      ctx.lineWidth = line.size || 2;\r\n      ctx.globalCompositeOperation = line.mode === \"eraser\" ? \"destination-out\" : \"source-over\";\r\n      line.points.forEach(([x, y], i) => {\r\n        if (i === 0) ctx.moveTo(x, y);\r\n        else ctx.lineTo(x, y);\r\n      });\r\n      ctx.stroke();\r\n      ctx.globalCompositeOperation = \"source-over\";\r\n    });\r\n  }, [elements, lines, imageCache, selectedIdx]);\r\n\r\n  function drawHandles(ctx, x, y, w, h) {\r\n    const handles = [\r\n      [x - HANDLE_SIZE / 2, y - HANDLE_SIZE / 2],\r\n      [x + w - HANDLE_SIZE / 2, y - HANDLE_SIZE / 2],\r\n      [x - HANDLE_SIZE / 2, y + h - HANDLE_SIZE / 2],\r\n      [x + w - HANDLE_SIZE / 2, y + h - HANDLE_SIZE / 2],\r\n    ];\r\n    handles.forEach(([hx, hy]) => {\r\n      ctx.fillStyle = \"#fff\";\r\n      ctx.strokeStyle = \"#333\";\r\n      ctx.lineWidth = 1;\r\n      ctx.fillRect(hx, hy, HANDLE_SIZE, HANDLE_SIZE);\r\n      ctx.strokeRect(hx, hy, HANDLE_SIZE, HANDLE_SIZE);\r\n    });\r\n  }\r\n\r\n  const saveState = (newElements, newLines, newTitle = designName) => {\r\n    const newHistory = history.slice(0, historyIndex + 1);\r\n    newHistory.push({\r\n      elements: JSON.parse(JSON.stringify(newElements)),\r\n      lines: JSON.parse(JSON.stringify(newLines)),\r\n      title: newTitle,\r\n    });\r\n    setHistory(newHistory);\r\n    setHistoryIndex(newHistory.length - 1);\r\n    setDesignName(newTitle);\r\n  };\r\n\r\n  const handleUndo = () => {\r\n    if (historyIndex > 0) {\r\n      setHistoryIndex(historyIndex - 1);\r\n      setSelectedIdx(null);\r\n    }\r\n  };\r\n\r\n  const handleRedo = () => {\r\n    if (historyIndex < history.length - 1) {\r\n      setHistoryIndex(historyIndex + 1);\r\n      setSelectedIdx(null);\r\n    }\r\n  };\r\n\r\n  const getHandleAt = (el, mouseX, mouseY) => {\r\n    const { w, h } = el;\r\n    const handles = [\r\n      [el.x - HANDLE_SIZE / 2, el.y - HANDLE_SIZE / 2],\r\n      [el.x + w - HANDLE_SIZE / 2, el.y - HANDLE_SIZE / 2],\r\n      [el.x - HANDLE_SIZE / 2, el.y + h - HANDLE_SIZE / 2],\r\n      [el.x + w - HANDLE_SIZE / 2, el.y + h - HANDLE_SIZE / 2],\r\n    ];\r\n    for (let i = 0; i < handles.length; i++) {\r\n      const [hx, hy] = handles[i];\r\n      if (mouseX >= hx && mouseX <= hx + HANDLE_SIZE && mouseY >= hy && mouseY <= hy + HANDLE_SIZE) return i;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const handleCanvasMouseDown = (e) => {\r\n    if (!canvasRef.current) return;\r\n    const rect = canvasRef.current.getBoundingClientRect();\r\n    const mouseX = e.nativeEvent.offsetX;\r\n    const mouseY = e.nativeEvent.offsetY;\r\n    let clicked = false;\r\n    for (let i = elements.length - 1; i >= 0; i--) {\r\n      const el = elements[i];\r\n      const handleIdx = getHandleAt(el, mouseX, mouseY);\r\n      if (i === selectedIdx && handleIdx !== null) {\r\n        setResizingHandle(handleIdx);\r\n        clicked = true;\r\n        break;\r\n      }\r\n      if (mouseX >= el.x && mouseX <= el.x + el.w && mouseY >= el.y && mouseY <= el.y + el.h) {\r\n        setSelectedIdx(i);\r\n        setDragOffset({ x: mouseX - el.x, y: mouseY - el.y });\r\n        setIsDragging(true);\r\n        clicked = true;\r\n        break;\r\n      }\r\n    }\r\n    if (!clicked) setSelectedIdx(null);\r\n\r\n    if (drawMode || eraserMode) {\r\n      setIsDrawing(true);\r\n      drawingPointsRef.current = [[mouseX, mouseY]];\r\n    }\r\n  };\r\n\r\n  const handleCanvasMouseMove = (e) => {\r\n    if (!canvasRef.current) return;\r\n    const mouseX = e.nativeEvent.offsetX;\r\n    const mouseY = e.nativeEvent.offsetY;\r\n\r\n    if (resizingHandle !== null && selectedIdx !== null) {\r\n      const el = elements[selectedIdx];\r\n      const newEl = { ...el };\r\n      if (resizingHandle === 0) {\r\n        newEl.x = mouseX;\r\n        newEl.y = mouseY;\r\n        newEl.w = el.w + (el.x - mouseX);\r\n        newEl.h = el.h + (el.y - mouseY);\r\n      } else if (resizingHandle === 1) {\r\n        newEl.y = mouseY;\r\n        newEl.w = mouseX - el.x;\r\n        newEl.h = el.h + (el.y - mouseY);\r\n      } else if (resizingHandle === 2) {\r\n        newEl.x = mouseX;\r\n        newEl.w = el.w + (el.x - mouseX);\r\n        newEl.h = mouseY - el.y;\r\n      } else if (resizingHandle === 3) {\r\n        newEl.w = mouseX - el.x;\r\n        newEl.h = mouseY - el.y;\r\n      }\r\n      newEl.w = Math.max(20, newEl.w);\r\n      newEl.h = Math.max(20, newEl.h);\r\n      if (el.type === \"text\") newEl.fontSize = Math.max(12, newEl.h - 8);\r\n      const newElements = elements.map((s, idx) => (idx === selectedIdx ? newEl : s));\r\n      setHistory((h) => {\r\n        const newHistory = h.slice(0, historyIndex + 1);\r\n        newHistory[historyIndex] = { elements: newElements, lines };\r\n        return newHistory;\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (isDragging && selectedIdx !== null) {\r\n      const newElements = elements.map((s, idx) =>\r\n        idx === selectedIdx ? { ...s, x: mouseX - dragOffset.x, y: mouseY - dragOffset.y } : s\r\n      );\r\n      setHistory((h) => {\r\n        const newHistory = h.slice(0, historyIndex + 1);\r\n        newHistory[historyIndex] = { elements: newElements, lines };\r\n        return newHistory;\r\n      });\r\n    }\r\n\r\n    if (isDrawing && (drawMode || eraserMode)) {\r\n      const ctx = canvasRef.current.getContext(\"2d\");\r\n      const points = drawingPointsRef.current;\r\n      points.push([mouseX, mouseY]);\r\n      ctx.beginPath();\r\n      ctx.moveTo(points[points.length - 2][0], points[points.length - 2][1]);\r\n      ctx.lineTo(mouseX, mouseY);\r\n      ctx.lineWidth = eraserMode ? eraserSize : brushSize;\r\n      ctx.strokeStyle = eraserMode ? \"rgba(0,0,0,1)\" : pencilColor;\r\n      ctx.globalCompositeOperation = eraserMode ? \"destination-out\" : \"source-over\";\r\n      ctx.stroke();\r\n      ctx.globalCompositeOperation = \"source-over\";\r\n    }\r\n  };\r\n\r\n  const handleCanvasMouseUp = () => {\r\n    if (isDrawing) {\r\n      if (!canvasRef.current) return;\r\n      const newLine = {\r\n        id: nextId++,\r\n        points: drawingPointsRef.current,\r\n        color: pencilColor,\r\n        size: eraserMode ? eraserSize : brushSize,\r\n        mode: eraserMode ? \"eraser\" : \"draw\",\r\n      };\r\n      saveState(elements, [...lines, newLine], designName);\r\n    }\r\n    if (resizingHandle !== null) setResizingHandle(null);\r\n    if (isDragging) setIsDragging(false);\r\n    setIsDrawing(false);\r\n  };\r\n\r\n  const handleAddShape = () => {\r\n    if (!canvasRef.current) return;\r\n    const ctx = canvasRef.current.getContext(\"2d\");\r\n    const { w, h } = getDefaultSize(selectedShape, \"\", ctx);\r\n    const newElement = {\r\n      id: nextId++,\r\n      type: selectedShape,\r\n      x: 300,\r\n      y: 100,\r\n      color: shapeColor,\r\n      w,\r\n      h,\r\n      rotation: 0,\r\n    };\r\n    if (selectedShape === \"image\") return;\r\n    saveState([...elements, newElement], lines, designName);\r\n  };\r\n\r\n  const handleAddText = () => {\r\n    if (!canvasRef.current) return;\r\n    const text = prompt(\"Enter text to add:\");\r\n    if (!text) return;\r\n    const ctx = canvasRef.current.getContext(\"2d\");\r\n    ctx.font = `24px ${fontFamily}`;\r\n    const { w, h, fontSize } = getDefaultSize(\"text\", text, ctx);\r\n    const newText = {\r\n      id: nextId++,\r\n      type: \"text\",\r\n      text,\r\n      x: 100,\r\n      y: 100,\r\n      color: textColor,\r\n      w,\r\n      h,\r\n      fontSize,\r\n      fontFamily,\r\n      rotation: 0,\r\n    };\r\n    saveState([...elements, newText], lines, designName);\r\n  };\r\n\r\n  const handleShapeColorChange = (e) => {\r\n    setShapeColor(e.target.value);\r\n    if (selectedIdx !== null) {\r\n      const newElements = elements.map((el, idx) => (idx === selectedIdx ? { ...el, color: e.target.value } : el));\r\n      saveState(newElements, lines, designName);\r\n    }\r\n  };\r\n\r\n  const handleTextColorChange = (e) => {\r\n    setTextColor(e.target.value);\r\n    if (selectedIdx !== null && elements[selectedIdx]?.type === \"text\") {\r\n      const newElements = elements.map((el, idx) => (idx === selectedIdx ? { ...el, color: e.target.value } : el));\r\n      saveState(newElements, lines, designName);\r\n    }\r\n  };\r\n\r\n  const handleUploadImage = () => fileInputRef.current.click();\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    const reader = new FileReader();\r\n    reader.onload = function (event) {\r\n      const newElement = {\r\n        id: nextId++,\r\n        type: \"image\",\r\n        x: 50,\r\n        y: 50,\r\n        w: 200,\r\n        h: 200,\r\n        src: event.target.result,\r\n        rotation: 0,\r\n      };\r\n      saveState([...elements, newElement], lines, designName);\r\n    };\r\n    reader.readAsDataURL(file);\r\n    e.target.value = \"\";\r\n  };\r\n\r\n  const moveElement = (dir) => {\r\n    if (selectedIdx === null) return;\r\n    const newElements = [...elements];\r\n    let idx = selectedIdx;\r\n    if (dir === \"up\" && idx < newElements.length - 1) {\r\n      [newElements[idx], newElements[idx + 1]] = [newElements[idx + 1], newElements[idx]];\r\n      setSelectedIdx(idx + 1);\r\n    }\r\n    if (dir === \"down\" && idx > 0) {\r\n      [newElements[idx], newElements[idx - 1]] = [newElements[idx - 1], newElements[idx]];\r\n      setSelectedIdx(idx - 1);\r\n    }\r\n    saveState(newElements, lines, designName);\r\n  };\r\n\r\n  const clearCanvas = () => {\r\n    setHistory([{ elements: [], lines: [], title: designName }]);\r\n    setHistoryIndex(0);\r\n    setSelectedIdx(null);\r\n  };\r\n\r\n  const handleDownload = () => {\r\n    if (!canvasRef.current) return;\r\n    const link = document.createElement(\"a\");\r\n    link.download = (designName.trim() || \"canvas\") + \".png\";\r\n    link.href = canvasRef.current.toDataURL();\r\n    link.click();\r\n  };\r\n\r\n  const handleDeleteSelected = () => {\r\n    if (selectedIdx !== null) {\r\n      const newElements = elements.filter((_, idx) => idx !== selectedIdx);\r\n      saveState(newElements, lines, designName);\r\n      setSelectedIdx(null);\r\n    }\r\n  };\r\n\r\n  const handleSaveToCloud = async () => {\r\n    setSaveMessage(\"\");\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const imageDataURL = canvasRef.current.toDataURL(\"image/png\");\r\n      const imageBlob = dataURLtoBlob(imageDataURL);\r\n\r\n      const formData = new FormData();\r\n      formData.append(\"file\", imageBlob);\r\n      formData.append(\"upload_preset\", \"MattyDesignTool\");\r\n      const res = await fetch(\"https://api.cloudinary.com/v1_1/dvxazjesy/image/upload\", {\r\n        method: \"POST\",\r\n        body: formData,\r\n      });\r\n      const data = await res.json();\r\n      const thumbnailUrl = data.secure_url;\r\n\r\n      const jsonData = { elements, lines, title: designName };\r\n\r\n      let response;\r\n      if (designId) {\r\n        response = await fetch(`http://localhost:5000/api/designs/${designId}`, {\r\n          method: \"PUT\",\r\n          headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\r\n          body: JSON.stringify({ title: designName, thumbnailUrl, jsonData }),\r\n        });\r\n      } else {\r\n        response = await fetch(\"http://localhost:5000/api/designs\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\r\n          body: JSON.stringify({ title: designName, thumbnailUrl, jsonData }),\r\n        });\r\n      }\r\n\r\n      if (!response.ok) throw new Error(\"Failed to save design!\");\r\n      setSaveMessage(\"✅ Design saved successfully!\");\r\n    } catch (err) {\r\n      setSaveMessage(\"❌ Save failed: \" + err.message);\r\n    }\r\n  };\r\n\r\n  // simple animation variants\r\n  const fadeIn = { hidden: { opacity: 0, y: 8 }, visible: { opacity: 1, y: 0 } };\r\n  const stagger = { visible: { transition: { staggerChildren: 0.06 } } };\r\n\r\n  return (\r\n    <div className=\"flex flex-col min-h-screen bg-gradient-to-b from-[#f8fafc] to-[#f1f5f9]\">\r\n      <header className=\"flex justify-between items-center p-4 bg-gradient-to-r from-[#0ea5e9] via-[#8b5cf6] to-[#ef4444] text-white shadow-lg\">\r\n        <motion.div\r\n          className=\"flex items-center gap-3 cursor-pointer\"\r\n          onClick={() => navigate(\"/dashboard\")}\r\n          whileHover={{ scale: 1.03 }}\r\n          whileTap={{ scale: 0.98 }}\r\n          title=\"Go to Dashboard\"\r\n        >\r\n          <motion.div\r\n            className=\"text-4xl font-extrabold\"\r\n            style={{ fontFamily: '\"Kablammo\", system-ui' }}\r\n            initial={{ rotate: -6 }}\r\n            animate={{ rotate: 0 }}\r\n            transition={{ type: \"spring\", stiffness: 120 }}\r\n          >\r\n            MATTY\r\n          </motion.div>\r\n          <motion.div className=\"text-sm opacity-90\">Design Studio</motion.div>\r\n        </motion.div>\r\n\r\n        <motion.div className=\"flex items-center gap-4\">\r\n          <motion.button\r\n            className=\"px-3 py-1 bg-white/20 rounded backdrop-blur-sm border border-white/30 text-sm\"\r\n            whileHover={{ scale: 1.04 }}\r\n            onClick={() => {\r\n              // quick save to cloud\r\n              handleSaveToCloud();\r\n            }}\r\n          >\r\n            Save\r\n          </motion.button>\r\n\r\n          <motion.button\r\n            className=\"px-3 py-1 bg-white/20 rounded backdrop-blur-sm border border-white/30 text-sm\"\r\n            whileHover={{ scale: 1.04 }}\r\n            onClick={() => handleDownload()}\r\n          >\r\n            Export\r\n          </motion.button>\r\n        </motion.div>\r\n      </header>\r\n\r\n      <div className=\"flex gap-4 p-4\">\r\n        <aside className=\"w-72 flex-shrink-0\">\r\n          <AnimatePresence>\r\n            <motion.div\r\n              className=\"bg-white rounded-xl p-4 shadow-md\"\r\n              initial={{ opacity: 0, x: -12 }}\r\n              animate={{ opacity: 1, x: 0 }}\r\n              exit={{ opacity: 0, x: -12 }}\r\n            >\r\n              <h3 className=\"font-semibold text-lg mb-3 border-b pb-2\">Tools</h3>\r\n\r\n              <motion.div className=\"grid gap-3\" variants={stagger} initial=\"hidden\" animate=\"visible\">\r\n                <motion.div className=\"flex gap-2\" variants={fadeIn}>\r\n                  <button\r\n                    className={`flex-1 py-2 rounded ${drawMode && !eraserMode ? \"bg-gradient-to-r from-[#a78bfa] to-[#60a5fa] text-white\" : \"bg-gray-100\"}`}\r\n                    onClick={() => {\r\n                      if (drawMode) setDrawMode(false);\r\n                      else {\r\n                        setDrawMode(true);\r\n                        setEraserMode(false);\r\n                      }\r\n                    }}\r\n                  >\r\n                    Pencil\r\n                  </button>\r\n                  <button\r\n                    className={`py-2 px-3 rounded ${eraserMode ? \"bg-gradient-to-r from-[#fda4af] to-[#feb2b2] text-white\" : \"bg-gray-100\"}`}\r\n                    onClick={() => {\r\n                      if (eraserMode) setEraserMode(false);\r\n                      else {\r\n                        setEraserMode(true);\r\n                        setDrawMode(false);\r\n                      }\r\n                    }}\r\n                  >\r\n                    Eraser\r\n                  </button>\r\n                </motion.div>\r\n\r\n                <motion.div variants={fadeIn} className=\"flex items-center gap-2\">\r\n                  <label className=\"text-sm\">Pencil</label>\r\n                  <input type=\"color\" value={pencilColor} onChange={(e) => setPencilColor(e.target.value)} className=\"w-8 h-8 p-0 border-0\" />\r\n                  <input type=\"range\" min={1} max={30} value={brushSize} onChange={(e) => setBrushSize(Number(e.target.value))} className=\"flex-1\" />\r\n                  <span className=\"text-xs\">{brushSize}px</span>\r\n                </motion.div>\r\n\r\n                <motion.div variants={fadeIn} className=\"flex items-center gap-2\">\r\n                  <label className=\"text-sm\">Eraser</label>\r\n                  <input type=\"range\" min={5} max={50} value={eraserSize} onChange={(e) => setEraserSize(Number(e.target.value))} className=\"flex-1\" />\r\n                  <span className=\"text-xs\">{eraserSize}px</span>\r\n                </motion.div>\r\n\r\n                <motion.div variants={fadeIn} className=\"flex items-center gap-2\">\r\n                  <button className=\"w-full py-2 rounded bg-gray-100 hover:bg-gray-50\" onClick={clearCanvas}>Clear</button>\r\n                </motion.div>\r\n              </motion.div>\r\n            </motion.div>\r\n          </AnimatePresence>\r\n\r\n          <motion.div className=\"mt-4 bg-white rounded-xl p-4 shadow-md\" initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }}>\r\n            <h3 className=\"font-semibold text-lg mb-3 border-b pb-2\">Shapes</h3>\r\n            <select className=\"mb-3 p-2 border rounded w-full\" value={selectedShape} onChange={(e) => { setSelectedShape(e.target.value); setDrawMode(false); setEraserMode(false); }}>\r\n              <option value=\"rectangle\">Rectangle</option>\r\n              <option value=\"square\">Square</option>\r\n              <option value=\"circle\">Circle</option>\r\n              <option value=\"oval\">Oval</option>\r\n              <option value=\"triangle\">Triangle</option>\r\n              <option value=\"parallelogram\">Parallelogram</option>\r\n              <option value=\"rhombus\">Rhombus</option>\r\n              <option value=\"trapezoid\">Trapezoid</option>\r\n              <option value=\"kite\">Kite</option>\r\n              <option value=\"pentagon\">Pentagon</option>\r\n              <option value=\"hexagon\">Hexagon</option>\r\n              <option value=\"heptagon\">Heptagon</option>\r\n              <option value=\"octagon\">Octagon</option>\r\n              <option value=\"nonagon\">Nonagon</option>\r\n              <option value=\"decagon\">Decagon</option>\r\n            </select>\r\n            <div className=\"flex items-center gap-2 mb-3\">\r\n              <input type=\"color\" value={shapeColor} onChange={handleShapeColorChange} className=\"w-10 h-10 p-0 border-0\" />\r\n              <button className=\"flex-1 py-2 rounded bg-gradient-to-r from-[#a78bfa] to-[#60a5fa] text-white\" onClick={handleAddShape}>Add Shape</button>\r\n            </div>\r\n\r\n            <div className=\"flex gap-2\">\r\n              <button className=\"flex-1 py-2 rounded bg-gray-100\" onClick={() => moveElement('up')} disabled={selectedIdx === null}>Move Up</button>\r\n              <button className=\"flex-1 py-2 rounded bg-gray-100\" onClick={() => moveElement('down')} disabled={selectedIdx === null}>Move Down</button>\r\n            </div>\r\n          </motion.div>\r\n\r\n          <motion.div className=\"mt-4 bg-white rounded-xl p-4 shadow-md\" initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }}>\r\n            <h3 className=\"font-semibold text-lg mb-3 border-b pb-2\">Text</h3>\r\n            <label className=\"block text-sm mb-1\">Font</label>\r\n            <select className=\"mb-3 p-2 border rounded w-full\" value={fontFamily} onChange={e => { setFontFamily(e.target.value); if (selectedIdx !== null && elements[selectedIdx]?.type === \"text\") { const newElements = elements.map((el, idx) => idx === selectedIdx ? { ...el, fontFamily: e.target.value } : el); saveState(newElements, lines, designName); } }}>\r\n              <option>Arial</option>\r\n              <option>Times New Roman</option>\r\n              <option>Georgia</option>\r\n              <option>Courier New</option>\r\n              <option>Verdana</option>\r\n              <option>Trebuchet MS</option>\r\n              <option>Helvetica</option>\r\n              <option>Impact</option>\r\n            </select>\r\n            <div className=\"flex items-center gap-2 mb-3\">\r\n              <input type=\"color\" value={textColor} onChange={handleTextColorChange} className=\"w-10 h-10 p-0 border-0\" />\r\n              <button className=\"flex-1 py-2 rounded bg-gradient-to-r from-[#34d399] to-[#10b981] text-white\" onClick={handleAddText}>Add Text</button>\r\n            </div>\r\n          </motion.div>\r\n\r\n          <motion.div className=\"mt-4 bg-white rounded-xl p-4 shadow-md\" initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }}>\r\n            <h3 className=\"font-semibold text-lg mb-3 border-b pb-2\">Export / Images</h3>\r\n            <div className=\"flex flex-col gap-2\">\r\n              <button className=\"py-2 rounded bg-gray-100\" onClick={handleUploadImage}>Upload Image</button>\r\n              <button className=\"py-2 rounded bg-gradient-to-r from-[#fde68a] to-[#fca5a5]\" onClick={handleSaveToCloud}>Save to Cloud</button>\r\n              <button className=\"py-2 rounded bg-gray-100\" onClick={handleDownload}>Download</button>\r\n              {saveMessage && <div className={`mt-2 p-2 rounded text-sm ${saveMessage.startsWith('✅') ? 'bg-green-50 text-green-700' : 'bg-red-50 text-red-700'}`}>{saveMessage}</div>}\r\n            </div>\r\n            <input type=\"file\" accept=\"image/*\" ref={fileInputRef} style={{ display: 'none' }} onChange={handleFileChange} />\r\n          </motion.div>\r\n        </aside>\r\n\r\n        <main className=\"flex-1 flex items-center justify-center\">\r\n          <motion.div className=\"bg-white rounded-2xl shadow-2xl p-6\"\r\n            initial={{ scale: 0.98, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            transition={{ type: 'spring', stiffness: 120 }}\r\n          >\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n              <input className=\"border px-3 py-2 rounded font-medium text-lg w-96\" placeholder=\"Enter design name\" value={designName} onChange={(e) => { const newTitle = e.target.value; setDesignName(newTitle); saveState(elements, lines, newTitle); }} />\r\n              <div className=\"flex gap-2\">\r\n                <button className=\"px-3 py-1 rounded bg-gray-100\" onClick={handleUndo} disabled={historyIndex === 0}>Undo</button>\r\n                <button className=\"px-3 py-1 rounded bg-gray-100\" onClick={handleRedo} disabled={historyIndex === history.length - 1}>Redo</button>\r\n                <button className=\"px-3 py-1 rounded bg-red-100 text-red-700\" onClick={handleDeleteSelected} disabled={selectedIdx === null}>Delete</button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"w-[1000px] h-[700px] rounded-lg overflow-hidden border border-gray-200\">\r\n              <canvas ref={canvasRef} width={1000} height={700}\r\n                style={{ background: 'linear-gradient(180deg, #ffffff 0%, #f8fafc 100%)' }}\r\n                onMouseDown={handleCanvasMouseDown}\r\n                onMouseMove={handleCanvasMouseMove}\r\n                onMouseUp={handleCanvasMouseUp}\r\n                onMouseLeave={handleCanvasMouseUp}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"mt-4 flex items-center justify-between text-sm text-gray-600\">\r\n              <div>Selected: {selectedIdx !== null ? (elements[selectedIdx]?.type || '—') : 'None'}</div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <label className=\"flex items-center gap-2\">Rotation\r\n                  <input type=\"range\" min={0} max={360} value={selectedIdx !== null ? elements[selectedIdx].rotation || 0 : 0} onChange={(e) => { if (selectedIdx !== null) { const angle = Number(e.target.value); const newElements = elements.map((el, idx) => idx === selectedIdx ? { ...el, rotation: angle } : el); saveState(newElements, lines, designName); } }} />\r\n                </label>\r\n                <span>{selectedIdx !== null ? elements[selectedIdx].rotation || 0 : 0}°</span>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}