{"ast":null,"code":"import _objectSpread from\"C:/Users/lenovo pro/Documents/gncipl-6-week/Week-6_final_project/matty-project/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useRef,useState,useEffect}from'react';import{Stage,Layer,Rect,Text,Image}from'react-konva';import useImage from'use-image';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CanvasImage=_ref=>{let{imgData}=_ref;const[image]=useImage(imgData.url);return/*#__PURE__*/_jsx(Image,{image:image,x:imgData.x,y:imgData.y,width:imgData.width,height:imgData.height});};const CanvasEditor=_ref2=>{let{design}=_ref2;const stageRef=useRef();const[history,setHistory]=useState([design.jsonData]);const[step,setStep]=useState(0);const[currentData,setCurrentData]=useState(design.jsonData);useEffect(()=>{setCurrentData(history[step]);},[step,history]);const addRect=()=>{const newData=_objectSpread(_objectSpread({},currentData),{},{shapes:[...currentData.shapes,{type:'rect',x:50,y:50,width:100,height:100,color:'red'}]});const newHistory=[...history.slice(0,step+1),newData];setHistory(newHistory);setStep(step+1);};const undo=()=>step>0&&setStep(step-1);const redo=()=>step<history.length-1&&setStep(step+1);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:addRect,className:\"px-2 py-1 bg-blue-500 text-white rounded\",children:\"Add Rectangle\"}),/*#__PURE__*/_jsx(\"button\",{onClick:undo,className:\"px-2 py-1 bg-gray-500 text-white rounded ml-2\",children:\"Undo\"}),/*#__PURE__*/_jsx(\"button\",{onClick:redo,className:\"px-2 py-1 bg-gray-500 text-white rounded ml-2\",children:\"Redo\"})]}),/*#__PURE__*/_jsx(Stage,{width:800,height:600,ref:stageRef,className:\"border border-gray-300\",children:/*#__PURE__*/_jsxs(Layer,{children:[currentData.shapes.map((s,i)=>/*#__PURE__*/_jsx(Rect,{x:s.x,y:s.y,width:s.width,height:s.height,fill:s.color},i)),currentData.text.map((t,i)=>/*#__PURE__*/_jsx(Text,{x:t.x,y:t.y,text:t.content,fontSize:t.fontSize,fill:t.color},i)),currentData.images.map((img,i)=>/*#__PURE__*/_jsx(CanvasImage,{imgData:img},i))]})})]});};export default CanvasEditor;","map":{"version":3,"names":["React","useRef","useState","useEffect","Stage","Layer","Rect","Text","Image","useImage","jsx","_jsx","jsxs","_jsxs","CanvasImage","_ref","imgData","image","url","x","y","width","height","CanvasEditor","_ref2","design","stageRef","history","setHistory","jsonData","step","setStep","currentData","setCurrentData","addRect","newData","_objectSpread","shapes","type","color","newHistory","slice","undo","redo","length","className","children","onClick","ref","map","s","i","fill","text","t","content","fontSize","images","img"],"sources":["C:/Users/lenovo pro/Documents/gncipl-6-week/Week-6_final_project/matty-project/client/src/components/CanvasEditor.jsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\r\nimport { Stage, Layer, Rect, Text, Image } from 'react-konva';\r\nimport useImage from 'use-image';\r\n\r\nconst CanvasImage = ({ imgData }) => {\r\n  const [image] = useImage(imgData.url);\r\n  return <Image image={image} x={imgData.x} y={imgData.y} width={imgData.width} height={imgData.height} />;\r\n};\r\n\r\nconst CanvasEditor = ({ design }) => {\r\n  const stageRef = useRef();\r\n  const [history, setHistory] = useState([design.jsonData]);\r\n  const [step, setStep] = useState(0);\r\n  const [currentData, setCurrentData] = useState(design.jsonData);\r\n\r\n  useEffect(() => {\r\n    setCurrentData(history[step]);\r\n  }, [step, history]);\r\n\r\n  const addRect = () => {\r\n    const newData = {\r\n      ...currentData,\r\n      shapes: [...currentData.shapes, { type: 'rect', x: 50, y: 50, width: 100, height: 100, color: 'red' }],\r\n    };\r\n    const newHistory = [...history.slice(0, step + 1), newData];\r\n    setHistory(newHistory);\r\n    setStep(step + 1);\r\n  };\r\n\r\n  const undo = () => step > 0 && setStep(step - 1);\r\n  const redo = () => step < history.length - 1 && setStep(step + 1);\r\n\r\n  return (\r\n    <div className=\"flex flex-col\">\r\n      <div className=\"mb-2\">\r\n        <button onClick={addRect} className=\"px-2 py-1 bg-blue-500 text-white rounded\">Add Rectangle</button>\r\n        <button onClick={undo} className=\"px-2 py-1 bg-gray-500 text-white rounded ml-2\">Undo</button>\r\n        <button onClick={redo} className=\"px-2 py-1 bg-gray-500 text-white rounded ml-2\">Redo</button>\r\n      </div>\r\n      <Stage width={800} height={600} ref={stageRef} className=\"border border-gray-300\">\r\n        <Layer>\r\n          {currentData.shapes.map((s, i) => (\r\n            <Rect key={i} x={s.x} y={s.y} width={s.width} height={s.height} fill={s.color} />\r\n          ))}\r\n          {currentData.text.map((t, i) => (\r\n            <Text key={i} x={t.x} y={t.y} text={t.content} fontSize={t.fontSize} fill={t.color} />\r\n          ))}\r\n          {currentData.images.map((img, i) => (\r\n            <CanvasImage key={i} imgData={img} />\r\n          ))}\r\n        </Layer>\r\n      </Stage>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CanvasEditor;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}